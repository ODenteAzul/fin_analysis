FROM python:3.10-slim

# Instala cron
RUN apt-get update && apt-get install -y cron

# Copia seus scripts e crontab
COPY run_scrapping.sh /usr/local/bin/run_scrapping.sh
COPY run_macro.sh /usr/local/bin/run_macro.sh
COPY mycron /etc/cron.d/mycron

RUN chmod +x /usr/local/bin/run_scrapping.sh /usr/local/bin/run_macro.sh
RUN chmod 0644 /etc/cron.d/mycron
RUN crontab /etc/cron.d/mycron

# Copia o código fonte (ajuste conforme seu layout)
COPY . /app
WORKDIR /app

# Instala dependências
RUN pip install -r requirements.txt

# Executa o cron em foreground
CMD ["cron", "-f"]